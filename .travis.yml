sudo: true
language: php
php:
  - 7.2
  - 7.3

matrix:
    fast_finish: true
    allow_failures:
      - php: 7.3

branches:
  only:
    - /master/
    - /dev/

before_install:
  - export SCRIPT_DIR=$HOME/islandora/.scripts

install:
  - git clone https://github.com/Islandora/documentation.git $HOME/islandora
  - composer install

script:
  - $SCRIPT_DIR/line_endings.sh $TRAVIS_BUILD_DIR
  - composer test

after_success:
  - bash <(curl -s https://codecov.io/bash)

notifications:
  slack:
    secure: XyXLJl6JsDyIXLmlVRF1DMWnjur0DLPy4AP+TAC09CJbtGj3lqYXAAQvDDxUlS3zdVBNTsHEdRQlOaxE/Zw0zQ+JSbpukSN3HaQay3eb2xunHToIB+XCCBf47GJxo6E84rSA47/QoKLEcyeVVdj/jC+SFKSrVDM9wOoQ0eA8caWo2mh6/fcHUL4qeAD+wqf+8t36M+UIP60xY60UcNCL+UWkQA2hXpNuOnaekma903g0M6OnsEVbJUtMjO35GEwyKhCX0wI4+MzEqNzwlVXPCkjVsnzY3LwlGsei7IIG719e4rdL45W9RguFeXPzl8Uo74QpjPB/cQR8Ylfysk544HSsx0ZJtcw/9AgJ1Xet0Gx8FQbxQLcBJB8JSS6gPSis/co61l7lmfpUbqIgoP3nJkrnIKbKvJ+YhltL5MBfaVFxicdrYITwLEI89xlbxJTqZdUhBDulKhe9B5YuRGJjvmPdjjI0yefv9/wCaQ06q7v3awR0EIQFJlUaR9mK75SGCFe7pLxzls9J8pB599m2Rr88pWxfPe2RMnppRSLnMYoyl8p2434AFjLwndJW8Cvt0aNRMw86fX6ccYJ4fBDuELSwIwgfyMtQlo33EAt80VYlkaaq018ZVf64RoyNvKYSfjuRwqVXoii2D6+mjCjK9YEyHBIDCrl/FG5S+8uJGrk=
